<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Editing shaders in Minecraft 3ds</title>
  <link rel="stylesheet" href="../css/styles.css">
</head>
<header>
  <div class="container">  
      <div class="header-content">
        <a href="../index.html">
          <img src="../assets/images/mc3dsmoddingwiki.png" alt="Minecraft 3DS Wiki" class="wiki-logo">
        </a>
        <img src="../assets/images/gear.png" alt="Settings" class="settings-icon" id="settingsIcon">
        <div class="sliding-background"></div>       
      </div>
    </div>     
  </header>
<body>
  <main>
    <h1>How to Create MC3DS shaders</h1>
    <p><a href="https://github.com/ENDERMANYK/Minecraft-3ds-shader">This repository</a> has a decompiled in-game shader file of the minecraft 3ds shader.</p>
    <ol>
      <li>Go to the repository linked above</li>
      <li>Go to the homebrew folder, and pick a vertex shader file (.VSH) to edit (not all are converted to picasso yet, if a shader file you want to edit has not been converted, contact Pizzaleader)</li>
      <li>Download the file, it is recommended to create a new folder to store your shader related stuff</li>
      <li>Go to <a href="https://devkitpro.org/wiki/Getting_Started#Windows">this</a> link and install the graphical installer.</li>
      <li>When it asks you what components you want to install, get the 3ds dev component</li>
      <li>Search in the windows search “MSys2” Open it, then run “dkp-pacman -S picasso”. Or, If that did not work, extract <a href="https://github.com/devkitPro/picasso/archive/refs/tags/v2.7.1.zip">this</a> zip and put the folder called picasso in C:\devkitPro.</li>
      <li>Edit the .VSH files with notepad++ or a similar tool (<a href="https://github.com/pizza-beep/Minecraft-3ds-shader/blob/main/homebrew/README.md">Picasso manual</a>)</li>
      <li>Copy your shader folder path and put it after CD in MSys2</li>
      <li>Use this command to build your shader:<br>picasso -o [].shbin [].vsh<br><strong>(Replace the [] with the shader file name)</strong></li>
      <li>Put the .shbin file you get as a result in \romfs\3DS\shaders</li>
    </ol>
    <h2>For people with some knowledge of shaders</h2>
    <p>Vertex shaders are the only programmable shaders implemented by the CTR-SDK(PICA200). Vertex shaders are written in PICA-specific assembly language. The OpenGL ES 2.0 API loads the executable files and then runs the shaders. The OpenGL ES 2.0 API can load only executable files that have been assembled and linked. You can't load shader files written in GLSL.</p>
    <p>Vertex shaders are run from the <strong>main</strong> function. A <strong>main</strong> object is an object file that can be assembled from an assembly code file that has a <strong>main</strong> function. A reference object is an object file that can be assembled from an assembly code file that does not have a <strong>main</strong> function.</p>
    <p>To put a <strong>main</strong> function in an assembly code file, set the <strong>main</strong> label at the location where shader execution starts and set the <strong>endmain</strong> label after the last instruction at the end of the main function. (This is the last instruction in the main function, not the last instruction in the assembly code file.) A reference object only has subroutines and is referenced by a main object to resolve unresolved labels. When the objects are linked to create an executable file, the executable file does not include reference objects that are not referenced by any main objects</p>
    <p><strong>Input Registers</strong></p>
    <p>Input registers are floating-point registers that store vertex attribute data ("attributes" in OpenGL ES 2.0 applications).</p>
    <p><strong>Temporary Registers</strong></p>
    <p>Temporary registers are floating-point registers that temporarily maintain calculation results to be reused later. Their values are preserved until they are overwritten.</p>
    <p><strong>Floating-Point Constant Registers</strong></p>
    <p>Floating-point constant registers are floating-point registers that store constants to use for calculations. Uniforms for OpenGL ES 2.0 applications are stored here.</p>
    <p><strong>Output Registers</strong></p>
    <p>These registers output data that has been processed by vertex shaders into a later stage of the graphics pipeline.</p>
    <h2>Building</h2>
    <p>You can use the nintendo 3ds devkit or <a href="https://github.com/devkitPro/picasso">picasso</a> from devkitpro. If you decide to use picasso as assembler, make sure use the file and instructions in <a href="https://github.com/ENDERMANYK/Minecraft-3ds-shader/blob/main/homebrew/README.md">homebrew</a> folder.</p>
    <p>Credits:<br>Endermanyk<br>Pizzaleader</p>
  </main>
 <!-- Settings Menu Modal -->
 <div class="settings-modal" id="settingsModal">
  <div class="settings-menu">
    <h2>Settings</h2>
    <label>
      <input type="checkbox" id="themeToggle">
      Toggle Dark/Light Mode
    </label>  
<!--       <label>
      <input type="checkbox" id="bgImageToggle">
      Enable Background Image
    </label> -->
    <label>
      <input type="checkbox" id="blurToggle">
      Enable Background Blur
    </label>
    <button id="closeSettings">Close</button>
  </div>
</div>
<script src="../js/main.js"></script> 
</body>
</html>
```
